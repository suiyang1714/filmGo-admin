{"version":3,"sources":["webpack:///webpack/bootstrap e0a3b20b95f042684082","webpack:///external \"mongoose\"","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///./server/database/schema/flim.js","webpack:///./server/database/schema/genre.js","webpack:///external \"fs\"","webpack:///external \"request\"","webpack:///./server/database/schema/admin.js","webpack:///./server/database/schema/category.js","webpack:///./server/database/schema/comment.js","webpack:///./server/database/schema/user.js","webpack:///./comingMovie.json","webpack:///./comingMovieStagePhotos.json","webpack:///./comingMovieTrailerDetail.json","webpack:///./comingMovieUri.json","webpack:///external \"path\"","webpack:///./nuxt.config.js","webpack:///./server/crawler/index.js","webpack:///./server/database/database.js","webpack:///./server/middleware/nodemail.js","webpack:///./server/router/index.js","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-session\"","webpack:///external \"koa2-cors\"","webpack:///external \"node-schedule\"","webpack:///external \"nuxt\"","webpack:///./server/config/index.js","webpack:///./server/crawler/crawlerAPI.js","webpack:///./server/middleware/qiniu.js","webpack:///./comingMovieTrailer.json","webpack:///./server/database/schema ^\\.\\/.*$","webpack:///external \"axios\"","webpack:///external \"bcryptjs\"","webpack:///external \"cheerio\"","webpack:///external \"crypto\"","webpack:///external \"ejs\"","webpack:///external \"koa-router\"","webpack:///external \"node-uuid\"","webpack:///external \"nodemailer\"","webpack:///external \"qiniu\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"request-promise\"","webpack:///./server/index.js"],"names":["mongoose","require","Schema","FilmSchema","title","String","pv","type","Number","default","comment","abstract","year","id","countries","Array","genres","name","source","ref","aka","casts","original_title","summary","directors","releaseDate","runtime","postPic","trailerPoster","trailerArray","like","filmStagePhotos","meta","createdAt","updatedAt","Film","model","module","exports","GenreSchema","filmArray","Date","now","pre","next","isNew","Genre","bcrypt","SALT_WORK_FACTOR","MAX_LOGIN_ATTEMPTS","LOCK_TIME","AdminSchema","user","password","nickname","role","isModified","genSalt","err","salt","hash","error","methods","comparePassword","_password","Promise","resolve","reject","compare","isMatch","incLoginAttempts","that","lockUntil","update","$set","loginAttempts","$unset","updates","$inc","isLocked","Admin","CategorySchema","articleArray","Category","CommentSchema","articleId","from","reply","to","content","updateTime","Comment","UserSchema","openid","avatarUrl","unionid","province","country","city","gender","MinaUser","head","charset","hid","link","rel","href","css","loading","color","build","extend","config","ctx","isClient","rules","push","enforce","test","loader","exclude","movieFile","axios","doubanAPI","request","qiniuFn","proxy","proxyConfig","port","sleep","time","setTimeout","console","log","fetchSingleFilm","filmId","options","method","uri","random","Math","floor","length","response","body","JSON","parse","e","film","fetchFilms","films","i","findOne","subjects","exec","filmData","filmObject","rating","images","all","map","item","index","fetchGenre","_id","genreId","save","genre","genreMsg","indexOf","crawlerDetail","filmDetail","filmTrailerDetail","movieName","j","actorAddMsg","k","avatars","splice","l","stagePhotos","trailerMP4","trailerId","trailerTitle","trailerDate","uploadQiniuFile","actorImg","replace","updateMovie","runMovieDetail","runMovieTrailer","runMovieTrailerDetail","runMoviePhotos","timeEnd","fs","models","__dirname","readdirSync","filter","file","search","forEach","database","set","global","connect","db","connection","on","nodemailer","path","ejs","transporter","createTransport","service","secureConnection","auth","pass","sendMailFn","sendMsg","template","compile","readFileSync","mailOptions","subject","sendMail","info","messageId","router","get","find","success","data","errMsg","localhost","url","errorMsg","query","rp","cheerio","uuid","getComingMovie","movieUrl","restartCount","encoding","$","load","decodeEntities","each","html","actor","attr","match","movie","text","movieMsg","comingMoviesLink","comingMovies","transform","trim","eq","writeFileSync","stringify","getMovieTrailer","trailerUri","trailer","Trailer","toRequest","trailerUrl","v1","getMovieTrailerDetail","comingTrailerLink","getMoviePhotos","photo","qiniu","crypto","accessKey","secretKey","safe64","base64","fileUrl","fileName","genManageToken","pathAndQuery","util","hmacSha1","base64ToUrlSafe","urlsafeBase64Encode","bucket","key","encodedEntry","fetchUrl","targetOptions","headers","app","host","process","env","HOST","PORT","dev","nuxt","builder","use","cors","origin","exposeHeaders","maxAge","credentials","allowMethods","allowHeaders","bodyParser","mongodb","keys","CONFIG","overwrite","httpOnly","signed","rolling","session","scheduleRecurrenceRule","rule","schedule","RecurrenceRule","hour","minute","second","scheduleJob","crawler","filmApi","routes","allowedMethods","status","req","res","render","promise","then","catch","listen","start"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 42);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e0a3b20b95f042684082","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","const mongoose = require('mongoose')\nconst { Schema } = mongoose\n\nconst FilmSchema = new Schema({\n  title: String,\n  pv: {\n    type: Number,\n    default: 1\n  },\n  comment: {\n    type: Number,\n    default: 0\n  },\n  abstract: String,\n  year: String,\n  id: String,\n  countries: Array,\n  genres: [\n    {\n      name: String,\n      source: {\n        type: String,\n        ref: 'Tag'\n      }\n    }\n  ],\n  aka: Array,\n  casts: Array,\n  original_title: String,\n  summary: String,\n  directors: Array,\n  releaseDate: Array,\n  runtime: String,\n  postPic: String,\n  trailerPoster: String,\n  trailerArray: Array,\n  like: String,\n  filmStagePhotos: Array,\n  meta: {\n    createdAt: {\n      type: String\n    },\n    updatedAt: {\n      type: String\n    }\n  }\n})\n\nconst Film = mongoose.model('Film', FilmSchema)\n\nmodule.exports = Film\n\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/flim.js","const mongoose = require('mongoose')\nconst { Schema } = mongoose\n\nconst GenreSchema = new Schema({\n  name: String,\n  filmArray: [\n    {\n      type: String,\n      ref: 'Article'\n    }\n  ],\n  meta: {\n    createdAt: {\n      type: Date,\n      default: Date.now()\n    },\n    updatedAt: {\n      type: Date,\n      default: Date.now()\n    }\n  }\n})\nGenreSchema.pre('save', function (next) {\n  if (this.isNew) {\n    this.meta.createdAt = this.meta.updatedAt = Date.now()\n  } else {\n    this.meta.updatedAt = Date.now()\n  }\n\n  next()\n})\n\nconst Genre = mongoose.model('Genre', GenreSchema)\n\nmodule.exports = Genre\n\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/genre.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 5\n// module chunks = 0","const mongoose = require('mongoose')\nconst bcrypt = require('bcryptjs')\n\nconst SALT_WORK_FACTOR = 10\nconst MAX_LOGIN_ATTEMPTS = 5\nconst LOCK_TIME = 2 * 60 * 60 * 1000\nconst Schema = mongoose.Schema\n\nconst AdminSchema = new Schema({\n  user: String,\n  password: String,\n  nickname: String,\n  role: {\n    type: String,\n    default: 'user'\n  },\n  meta: {\n    createdAt: {\n      type: Date,\n      default: Date.now()\n    },\n    updatedAt: {\n      type: Date,\n      default: Date.now()\n    }\n  }\n})\n\nAdminSchema.pre('save', function(next) {\n  if (this.isNew) {\n    this.meta.createdAt = this.meta.updatedAt = Date.now()\n  } else {\n    this.meta.updatedAt = Date.now()\n  }\n\n  next()\n})\n\nAdminSchema.pre('save', function(next) {\n  var user = this\n\n  if (!user.isModified('password')) return next()\n\n  bcrypt.genSalt(SALT_WORK_FACTOR, (err, salt) => {\n    if (err) return next(err)\n    bcrypt.hash(user.password, salt, (error, hash) => {\n      if (error) return next(error)\n\n      user.password = hash\n      next()\n    })\n  })\n})\n\nAdminSchema.methods = {\n  comparePassword: function (_password, password) {\n    return new Promise((resolve, reject) => {\n      bcrypt.compare(_password, password, function(err, isMatch) {\n        if (!err) resolve(isMatch)\n        else reject(err)\n      })\n    })\n  },\n\n  incLoginAttempts: function (user) {\n    var that = this\n\n    return new Promise((resolve, reject) => {\n      if (that.lockUntil && that.lockUntil < Date.now()) {\n        that.update({\n          $set: {\n            loginAttempts: 1\n          },\n          $unset: {\n            lockUntil: 1\n          }\n        }, function(err) {\n          if (!err) resolve(true)\n          else reject(err)\n        })\n      }\n      var updates = {\n        $inc: {\n          loginAttempts: 1\n        }\n      }\n      if (that.loginAttempts + 1 >= MAX_LOGIN_ATTEMPTS && !that.isLocked) {\n        updates.$set = {\n          lockUntil: Date.now() + LOCK_TIME\n        }\n      }\n\n      that.update(updates, err => {\n        if (!err) resolve(true)\n        else reject(err)\n      })\n    })\n  }\n}\n\nconst Admin = mongoose.model('Admin', AdminSchema)\n\nmodule.exports = Admin\n\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/admin.js","const mongoose = require('mongoose')\nconst { Schema } = mongoose\n\nconst CategorySchema = new Schema({\n  name: String,\n  articleArray: [\n    {\n      type: String,\n      ref: 'Article'\n    }\n  ],\n  meta: {\n    createdAt: {\n      type: Date,\n      default: Date.now()\n    },\n    updatedAt: {\n      type: Date,\n      default: Date.now()\n    }\n  }\n})\nCategorySchema.pre('save', function (next) {\n  if (this.isNew) {\n    this.meta.createdAt = this.meta.updatedAt = Date.now()\n  } else {\n    this.meta.updatedAt = Date.now()\n  }\n\n  next()\n})\n\nconst Category = mongoose.model('Category', CategorySchema)\n\nmodule.exports = Category\n\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/category.js","const mongoose = require('mongoose')\nconst { Schema } = mongoose\n\nconst CommentSchema = new Schema({\n  articleId: {\n    type: String,\n    ref: 'Article'\n  },\n  from: {\n    type: String,\n    ref: 'User'\n  },\n  reply: [{\n    from: {\n      type: String,\n      ref: 'User'\n    },\n    to: {\n      type: String,\n      ref: 'User'\n    },\n    content: String,\n    updateTime: String\n  }],\n  content: String,\n  meta: {\n    createdAt: {\n      type: Date,\n      default: Date.now()\n    },\n    updatedAt: {\n      type: Date,\n      default: Date.now()\n    }\n  }\n})\nCommentSchema.pre('save', function (next) {\n  if (this.isNew) {\n    this.meta.createdAt = this.meta.updatedAt = Date.now()\n  } else {\n    this.meta.updatedAt = Date.now()\n  }\n\n  next()\n})\n\nconst Comment = mongoose.model('Comment', CommentSchema)\n\nmodule.exports = Comment\n\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/comment.js","const mongoose = require('mongoose')\nconst Schema = mongoose.Schema\n\nconst UserSchema = new Schema({\n  openid: String,\n  avatarUrl: String,\n  nickname: String,\n  role: {\n    type: String,\n    default: 'user'\n  },\n  unionid: String,\n  province: String,\n  country: String,\n  city: String,\n  gender: String,\n  password: {\n    type: String\n  },\n  meta: {\n    createdAt: {\n      type: Date,\n      default: Date.now()\n    },\n    updatedAt: {\n      type: Date,\n      default: Date.now()\n    }\n  }\n})\n\nUserSchema.pre('save', function (next) {\n  if (this.isNew) {\n    this.meta.createdAt = this.meta.updatedAt = Date.now()\n  } else {\n    this.meta.updatedAt = Date.now()\n  }\n\n  next()\n})\n\nconst MinaUser = mongoose.model('MinaUser', UserSchema)\n\nmodule.exports = MinaUser\n\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/user.js","module.exports = [{\"movieName\":\"女校怪谈\",\"releaseDate\":[\"2018-07-26(中国大陆)\"],\"runtime\":[\"95分钟\"],\"postPic\":\"https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2520950573.jpg\",\"id\":\"30210203\",\"actorAddMsg\":[{\"actorImg\":\"https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png\",\"id\":\"1397901\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1502335874.25.jpg\",\"id\":\"1378788\"},{\"actorImg\":\"https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png\",\"id\":\"1375551\"},{\"actorImg\":\"https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png\",\"id\":\"1397902\"},{\"actorImg\":\"https://img3.doubanio.com/f/movie/14960825e118267b5857fc0ae9f306ef8c74da8f/pics/movie/has_douban@2x.png\",\"id\":\"1384366\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/pg081FoOH988cel_avatar_uploaded1525283611.15.jpg\",\"id\":\"1392266\"}],\"like\":\"138\"},{\"movieName\":\"狄仁杰之四大天王\",\"releaseDate\":[\"2018-07-27(中国大陆)\"],\"runtime\":[\"132分钟\"],\"postPic\":\"https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2526405034.jpg\",\"id\":\"25882296\",\"actorAddMsg\":[{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1393840734.39.jpg\",\"id\":\"1007152\"},{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p30529.jpg\",\"id\":\"1274608\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p36925.jpg\",\"id\":\"1275721\"},{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1398676888.79.jpg\",\"id\":\"1314535\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p21006.jpg\",\"id\":\"1259866\"},{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1411832447.57.jpg\",\"id\":\"1036905\"}],\"like\":\"47741\"},{\"movieName\":\"西虹市首富\",\"releaseDate\":[\"2018-07-27(中国大陆)\"],\"runtime\":[\"118分钟\"],\"postPic\":\"https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2525046210.jpg\",\"id\":\"27605698\",\"actorAddMsg\":[{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1437030925.47.jpg\",\"id\":\"1350410\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1437031053.5.jpg\",\"id\":\"1350409\"},{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1356510694.28.jpg\",\"id\":\"1325700\"},{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1446281965.79.jpg\",\"id\":\"1341903\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1413261818.41.jpg\",\"id\":\"1322777\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p11764.jpg\",\"id\":\"1275270\"}],\"like\":\"42151\"},{\"movieName\":\"萌学园：寻找盘古\",\"releaseDate\":[\"2018-07-28(中国大陆)\",\"2016-06-24(台湾)\"],\"runtime\":[],\"postPic\":\"https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2528103085.jpg\",\"id\":\"26754880\",\"actorAddMsg\":[{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1531291826.35.jpg\",\"id\":\"1358340\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1531291798.12.jpg\",\"id\":\"1396991\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1531295899.63.jpg\",\"id\":\"1396992\"},{\"actorImg\":\"https://img1.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1531295883.97.jpg\",\"id\":\"1378013\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1531296062.51.jpg\",\"id\":\"1396993\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1531295946.96.jpg\",\"id\":\"1396994\"}],\"like\":\"2623\"},{\"movieName\":\"文朝荣\",\"releaseDate\":[\"2018-07-28(中国大陆)\"],\"runtime\":[\"99分钟\"],\"postPic\":\"https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2526266295.jpg\",\"id\":\"30252429\",\"actorAddMsg\":[{\"actorImg\":\"https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png\",\"id\":\"1350551\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p37725.jpg\",\"id\":\"1274819\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1473681732.03.jpg\",\"id\":\"1327430\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1472458756.3.jpg\",\"id\":\"1361663\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1352300084.72.jpg\",\"id\":\"1324158\"},{\"actorImg\":\"https://img3.doubanio.com/view/celebrity/s_ratio_celebrity/public/p1471963335.01.jpg\",\"id\":\"1361312\"}],\"like\":\"26\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./comingMovie.json\n// module id = 10\n// module chunks = 0","module.exports = [{\"movieName\":\"女校怪谈的全部图片\",\"stagePhotos\":[\"https://img3.doubanio.com/view/photo/sqxs/public/p2520950573.jpg\"],\"id\":\"30210203\"},{\"movieName\":\"狄仁杰之四大天王的全部图片\",\"stagePhotos\":[\"https://img1.doubanio.com/view/photo/sqxs/public/p2520330709.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2524047958.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526310125.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527054211.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2520330695.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526131562.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528241705.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528183192.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2527054217.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526405005.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526310132.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2524047932.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2520330693.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2520311629.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528210042.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528210001.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527141620.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526440821.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526440820.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526405017.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526405000.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526310134.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526310129.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526131581.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2524309309.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2524309302.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2524309294.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2523602560.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2523602549.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2520330717.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528481387.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528481381.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528481378.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528481377.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528481373.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528481368.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528210045.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528210016.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528209985.jpg\",\"https://img3.doubanio.com/f/shire/0e1ad843c96c088061deb614851822692426c700/pics/morepic.png\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2516747361.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526405034.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2525085328.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527761121.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526399863.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2520710295.jpg\"],\"id\":\"25882296\"},{\"movieName\":\"西虹市首富的全部图片\",\"stagePhotos\":[\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872274.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872270.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872261.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528872258.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872250.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872246.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872241.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528872238.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528872237.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872233.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872230.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528872228.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872226.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872221.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872216.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872214.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872206.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528872199.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528872190.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528847031.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528847026.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528847021.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528847017.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528847014.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528847013.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2522724894.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2520081427.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527053783.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2524713151.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528482285.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2527053847.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527053791.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527053841.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526146046.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527053842.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2527053838.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2527053829.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2527053827.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2527053822.jpg\",\"https://img3.doubanio.com/f/shire/0e1ad843c96c088061deb614851822692426c700/pics/morepic.png\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2525046210.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526022674.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528742465.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526022695.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526022633.jpg\"],\"id\":\"27605698\"},{\"movieName\":\"萌学园：寻找盘古的全部图片\",\"stagePhotos\":[\"https://img3.doubanio.com/view/photo/sqxs/public/p2528846503.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528846498.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528846492.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528091870.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528091858.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528091838.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528091829.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528091820.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528481665.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2528481658.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528481650.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528481625.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2351198115.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528103085.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2528846506.jpg\"],\"id\":\"26754880\"},{\"movieName\":\"文朝荣的全部图片\",\"stagePhotos\":[\"https://img1.doubanio.com/view/photo/sqxs/public/p2526268069.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526268064.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526268035.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526268034.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526268032.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526268029.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526268022.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526268019.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526268016.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526268010.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526267279.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267276.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267274.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267273.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267270.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526267267.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267265.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267261.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526267259.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267255.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266973.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526266968.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266964.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266962.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526266958.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266952.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526266938.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266913.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266904.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266894.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526267569.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267495.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267481.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267430.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526267417.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526267398.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267386.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526267380.jpg\",\"https://img1.doubanio.com/view/photo/sqxs/public/p2526267328.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266362.jpg\",\"https://img3.doubanio.com/view/photo/sqxs/public/p2526266295.jpg\"],\"id\":\"30252429\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./comingMovieStagePhotos.json\n// module id = 11\n// module chunks = 0","module.exports = [{\"trailerArray\":[],\"id\":\"30210203\",\"trailerTitle\":\"女校怪谈 视频\"},{\"trailerArray\":[{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/b1cd0554be91ead7e5df821fd04735be/view/movie/M/402330791.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    预告片1：终极版 (中文字幕)\",\"trailerDate\":\"2018-07-17\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528211904.jpg?\",\"trailerId\":\"dc9b09208fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/9673016ce441f2d6dcfd56f876b00326/view/movie/M/402330325.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    预告片2：背水一战版 (中文字幕)\",\"trailerDate\":\"2018-07-05\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2527054753.jpg?\",\"trailerId\":\"dca67ad08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/8df87a83dc282b7173d73684822fabcb/view/movie/M/402320838.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    预告片3：天王现身版 (中文字幕)\",\"trailerDate\":\"2018-06-25\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2526137676.jpg?\",\"trailerId\":\"dca060508fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/dc04856366c55415932276bfe179055b/view/movie/M/302210792.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    预告片4：真相不白版 (中文字幕)\",\"trailerDate\":\"2017-09-22\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2499767152.jpg?\",\"trailerId\":\"dcada6c08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/8dada97ca199004defe39d11c40e209d/view/movie/M/402300245.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    先行版 (中文字幕)\",\"trailerDate\":\"2018-04-25\",\"trailerPoster\":\"https://img1.doubanio.com/img/trailer/medium/2520334127.jpg?\",\"trailerId\":\"dc975fa08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/e3357a1d12bc5b1b156a15797d627cb2/view/movie/M/402330976.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    其它预告片1 (中文字幕)\",\"trailerDate\":\"2018-07-20\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528487325.jpg?\",\"trailerId\":\"dc565f008fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/feb813a0658bc2c0992383ca820380e7/view/movie/M/402330737.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    其它预告片2 (中文字幕)\",\"trailerDate\":\"2018-07-16\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528093112.jpg?\",\"trailerId\":\"dc49b4d08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/8b2b3b4b72d7fc584085d4b3fbd7d487/view/movie/M/402320616.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    其它预告片3：大唐神器亢龙锏 (中文字幕)\",\"trailerDate\":\"2018-06-20\",\"trailerPoster\":\"https://img1.doubanio.com/img/trailer/medium/2525590378.jpg?\",\"trailerId\":\"dc4e21a08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/b377463b329f87fe1c5efe347416f47f/view/movie/M/402330781.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    花絮1：容易受伤的男人特辑 (中文字幕)\",\"trailerDate\":\"2018-07-17\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528185600.jpg?\",\"trailerId\":\"dc54ff708fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/d8f8a8b80a5fd8dab9a62c81e7546f8b/view/movie/M/402330597.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    花絮2 (中文字幕)\",\"trailerDate\":\"2018-07-12\",\"trailerPoster\":\"https://img1.doubanio.com/img/trailer/medium/2527752127.jpg?\",\"trailerId\":\"dc648fd08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/059ba680306ef4d5a6f0f0c8154c4ff3/view/movie/M/402330527.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    花絮3：九亿少女的梦特辑 (中文字幕)\",\"trailerDate\":\"2018-07-11\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2527641751.jpg?\",\"trailerId\":\"dc4c25d08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/070acf4ca5ee203cabae8744d0a1940c/view/movie/M/402330362.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    花絮4：争气朋克少女特辑 (中文字幕)\",\"trailerDate\":\"2018-07-06\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2527141912.jpg?\",\"trailerId\":\"dc91e1608fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/d13a3c633a89103770475d43447a9d5b/view/movie/M/402330067.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    花絮5 (中文字幕)\",\"trailerDate\":\"2018-06-28\",\"trailerPoster\":\"https://img1.doubanio.com/img/trailer/medium/2526441668.jpg?\",\"trailerId\":\"dc517d008fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/7d3f7b0cc0b175710ed3138073b3d326/view/movie/M/402320984.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    花絮6：武则天特辑 (中文字幕)\",\"trailerDate\":\"2018-06-27\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2526314013.jpg?\",\"trailerId\":\"dc80a3508fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/990a6cffe61c75014577ae85db79589d/view/movie/M/402310450.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    花絮7：神探回归特辑 (中文字幕)\",\"trailerDate\":\"2018-05-24\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2522954430.jpg?\",\"trailerId\":\"dc866fb08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/53ed7bc5a85e4a2a9ec95085d82f52c3/view/movie/M/402320624.mp4\",\"trailerTitle\":\"狄仁杰之四大天王\\n    其它花絮： IMAX推荐特辑 (中文字幕)\",\"trailerDate\":\"2018-06-20\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2525591834.jpg?\",\"trailerId\":\"dc4f81308fe911e891767ba38a035dd9\"}],\"id\":\"25882296\",\"trailerTitle\":\"狄仁杰之四大天王 视频\"},{\"trailerArray\":[{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/d590bc5647a9cf351df02aac4db56258/view/movie/M/402330361.mp4\",\"trailerTitle\":\"西虹市首富\\n    预告片1：百变首富版 (中文字幕)\",\"trailerDate\":\"2018-07-06\",\"trailerPoster\":\"https://img1.doubanio.com/img/trailer/medium/2527141847.jpg?\",\"trailerId\":\"de16aca08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/3115fe45f4f11dfb40d8f1f7e3210c3b/view/movie/M/402320859.mp4\",\"trailerTitle\":\"西虹市首富\\n    预告片2：主创推荐版 (中文字幕)\",\"trailerDate\":\"2018-06-25\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2526149462.jpg?\",\"trailerId\":\"de185a508fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/623a7939ec5f21f073f31f3743e8376e/view/movie/M/402320030.mp4\",\"trailerTitle\":\"西虹市首富\\n    预告片3：特笑版 (中文字幕)\",\"trailerDate\":\"2018-06-06\",\"trailerPoster\":\"https://img1.doubanio.com/img/trailer/medium/2524221309.jpg?\",\"trailerId\":\"de21f7408fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/d0b6392de7bf43f138d5ced7a843edb0/view/movie/M/402310173.mp4\",\"trailerTitle\":\"西虹市首富\\n    预告片4：特笑大片\",\"trailerDate\":\"2018-05-18\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2522456574.jpg?\",\"trailerId\":\"de13ed808fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/f374454bc1ada68b6f4d8008e270ef97/view/movie/M/402330327.mp4\",\"trailerTitle\":\"西虹市首富\\n    其它预告片 (中文字幕)\",\"trailerDate\":\"2018-07-05\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2527062942.jpg?\",\"trailerId\":\"de08f1008fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/6eefb4a44c00d2b3ece68934f8c03b1b/view/movie/M/402320506.mp4\",\"trailerTitle\":\"西虹市首富\\n    花絮：魔音特辑 (中文字幕)\",\"trailerDate\":\"2018-06-15\",\"trailerPoster\":\"https://img1.doubanio.com/img/trailer/medium/2525046609.jpg?\",\"trailerId\":\"de1266e08fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/97bc3ff329e8c5ccf5c62fdab08618ca/view/movie/M/402340143.mp4\",\"trailerTitle\":\"西虹市首富\\n    MV：推广曲《彩虹下面》 (中文字幕)\",\"trailerDate\":\"2018-07-24\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528850093.jpg?\",\"trailerId\":\"de5a6c608fe911e891767ba38a035dd9\"}],\"id\":\"27605698\",\"trailerTitle\":\"西虹市首富 视频\"},{\"trailerArray\":[{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/d1cc859283361a95c30a453bd4134e06/view/movie/M/402340138.mp4\",\"trailerTitle\":\"萌学园：寻找盘古\\n    预告片：终极版 (中文字幕)\",\"trailerDate\":\"2018-07-24\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528849466.jpg?\",\"trailerId\":\"dfb4a5308fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/5a89595b3c250e65cb242b3681d22e24/view/movie/M/402330739.mp4\",\"trailerTitle\":\"萌学园：寻找盘古\\n    先行版 (中文字幕)\",\"trailerDate\":\"2018-07-16\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528093465.jpg?\",\"trailerId\":\"dfb1bf008fe911e891767ba38a035dd9\"},{\"trailerMP4\":\"http://vt1.doubanio.com/201807251705/fe16759a58f4457053f9c38a2acd8d48/view/movie/M/402330974.mp4\",\"trailerTitle\":\"萌学园：寻找盘古\\n    花絮：制作特辑 (中文字幕)\",\"trailerDate\":\"2018-07-20\",\"trailerPoster\":\"https://img3.doubanio.com/img/trailer/medium/2528486736.jpg?\",\"trailerId\":\"dfb2a9608fe911e891767ba38a035dd9\"}],\"id\":\"26754880\",\"trailerTitle\":\"萌学园：寻找盘古 视频\"},{\"trailerArray\":[],\"id\":\"30252429\",\"trailerTitle\":\"文朝荣 视频\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./comingMovieTrailerDetail.json\n// module id = 12\n// module chunks = 0","module.exports = [{\"url\":\"https://movie.douban.com/subject/30210203/\",\"title\":\"女校怪谈\",\"like\":\"138\"},{\"url\":\"https://movie.douban.com/subject/25882296/\",\"title\":\"狄仁杰之四大天王\",\"like\":\"47741\"},{\"url\":\"https://movie.douban.com/subject/27605698/\",\"title\":\"西虹市首富\",\"like\":\"42151\"},{\"url\":\"https://movie.douban.com/subject/26754880/\",\"title\":\"萌学园：寻找盘古\",\"like\":\"2623\"},{\"url\":\"https://movie.douban.com/subject/30252429/\",\"title\":\"文朝荣\",\"like\":\"26\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./comingMovieUri.json\n// module id = 13\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 14\n// module chunks = 0","module.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'starter',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ]\n  },\n  /*\n  ** Global CSS\n  */\n  css: ['~assets/css/main.css'],\n  /*\n  ** Customize the progress-bar color\n  */\n  loading: { color: '#3B8070' },\n  /*\n   ** Build configuration\n   */\n  build: {\n    /*\n     ** Run ESLINT on save\n     */\n    extend (config, ctx) {\n      if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","const movieFile = require('./crawlerAPI')\nconst axios = require('axios')\nconst doubanAPI = 'http://api.douban.com/v2/movie/'\nconst request = require('request')\nconst qiniuFn = require('../middleware/qiniu')\n\nconst proxy = ['180.76.188.115','180.76.138.181','180.76.239.106','180.76.166.103','180.76.181.205','180.76.234.215','180.76.106.163','180.76.184.179','180.76.244.38','180.76.113.79','180.76.169.176','180.76.169.122','180.76.106.208','180.76.178.83','180.76.147.196','180.76.112.206',\n  '180.76.233.125','180.76.186.99','180.76.51.74','180.76.234.146','180.76.153.183','180.76.155.233','180.76.57.252','180.76.120.42','180.76.103.107','180.76.58.216','180.76.112.24','180.76.108.218','180.76.98.218','180.76.168.148','180.76.109.38','180.76.249.53',\n  '180.76.59.173','180.76.145.181','180.76.99.7','180.76.59.64','180.76.51.56','180.76.57.82','180.76.233.53','180.76.156.144']\nconst proxyConfig = {\n  port: \"443\",\n  user: \"martindu\",\n  password: \"fy1812!!\"\n}\n\nconst sleep = async time => await new Promise( resolve => {\n  setTimeout( () => {\n    return resolve(console.log(`等待${time}s`))\n  }, time*1000)\n} )\n\nconst Film = require('../database/schema/flim')\nconst Genre = require('../database/schema/genre')\n\nconst fetchSingleFilm = async (filmId) => {\n  const options = {\n    method: 'GET',\n    uri: `${doubanAPI}subject/${filmId}`\n  }\n  // 代理地址\n  const random = Math.floor(Math.random() * proxy.length)\n  // console.log(`随机数为${random}`)\n  options.proxy = `http://${proxyConfig.user}:${proxyConfig.password}@${proxy[random]}:${proxyConfig.port}`;\n\n  // const film = request(options)\n  const film = await new Promise(resolve => {\n    request(options, (error, response, body) => {\n      try {\n        if (error) throw error\n\n        resolve(JSON.parse(body))\n      } catch (e) {\n        console.log(`单个电影 API 请求失败，准备重新请求ing`)\n        fetchSingleFilm(filmId)\n        // console.log(e)\n      }\n    })\n  })\n\n  return film\n}\n\nconst fetchFilms = async () => {\n  let films\n  try {\n    const options = {\n      method: 'GET',\n      // uri: `${doubanAPI}coming_soon?count=100`\n      uri: `${doubanAPI}coming_soon?count=5`\n    }\n    // 代理地址\n    const random = Math.floor(Math.random() * proxy.length)\n    // console.log(`随机数为${random}`)\n    options.proxy = `http://${proxyConfig.user}:${proxyConfig.password}@${proxy[random]}:${proxyConfig.port}`;\n\n    films = await new Promise(resolve => {\n      request(options, (error, response, body) => {\n        console.log(body)\n        resolve(JSON.parse(body))\n      })\n    })\n  } catch (e) {\n    console.log(`即将上映电影列表API，请求失败，准备重新请求ing`)\n    fetchFilms()\n    // console.log(e)\n  }\n\n  for(let i = 0 ; i < films.subjects.length ; i++) {\n    let filmData = await Film\n      .findOne({id: films.subjects[i].id})\n      .exec()\n    if (!filmData) {\n      // 请求电影信息\n      const film = await fetchSingleFilm(films.subjects[i].id)\n\n      const filmObject = film\n      console.log(`第${i+1}个电影:\"${film.title}\"`)\n      filmData = new Film({\n        title: filmObject.title,\n        rating: filmObject.rating,\n        year: filmObject.year,\n        id: filmObject.id,\n        summary: filmObject.summary,\n        casts: filmObject.casts,\n        original_title: filmObject.original_title,\n        directors: filmObject.directors,\n        images: filmObject.images,\n        countries: filmObject.countries,\n        aka: filmObject.aka\n      })\n\n      // 查询该标签：有 => 返回 tagId || 无 => 新建该标签，返回 tagId\n      await Promise.all(film.genres.map(async (item, index) => {\n        const genreId = await fetchGenre(item, filmData._id)\n        filmData.genres[index] = {\n          name: item,\n          source: genreId\n        }\n        return genreId\n      }))\n      await filmData.save()\n      await sleep(2) // 间歇 2s\n\n    } else {\n      // 请求电影信息\n      const film = await fetchSingleFilm(films.subjects[i].id)\n\n      const filmObject = film\n\n      filmData.title = filmObject.title\n      filmData.rating = filmObject.rating\n      filmData.year = filmObject.year\n      filmData.id = filmObject.id\n      filmData.summary = filmObject.summary\n      filmData.casts = filmObject.casts,\n      filmData.original_title = filmObject.original_title\n      filmData.directors = filmObject.directors\n      filmData.images = filmObject.images\n      filmData.countries = filmObject.countries\n      filmData.aka = filmObject.aka\n\n      await filmData.save()\n      console.log(`第${i+1}个电影:\"${film.title}\"更新完毕`)\n      await sleep(2) // 间歇 2s\n    }\n  }\n  console.log(`电影更新完毕`)\n}\n// 查询类型方法\nconst fetchGenre = (genre, filmId) => {\n  return new Promise(async resolve => {\n    let genreMsg = await Genre\n      .findOne({name: genre})\n      .exec()\n\n    if (!genreMsg) {\n      genreMsg = await new Genre({\n        name: genre\n      })\n\n      genreMsg.filmArray.push(filmId)\n      await genreMsg.save()\n      resolve(genreMsg._id)\n    } else {\n      if (genreMsg.filmArray.indexOf(filmId) === -1) {  // 检测该标签内是否含有该电影的 _id ,按道理说这一步是多余的，先保留看看。\n        genreMsg.filmArray.push(filmId)\n        await genreMsg.save()\n      }\n      resolve(genreMsg._id)\n    }\n  })\n}\n\n// 读取本地爬取电影详细信息添加到数据空中\nconst crawlerDetail = async (ctx, next) => {\n  const filmDetail = require('../../comingMovie.json')\n  const filmStagePhotos = require('../../comingMovieStagePhotos.json')\n  const filmTrailerDetail = require('../../comingMovieTrailerDetail.json')\n\n  // 添加爬取的上映日期、播放时长、电影封面\n  await new Promise(async (resolve, reject) => {\n    try {\n      for(let i = 0 ; i < filmDetail.length ; i++) {\n        let film = await Film\n          .findOne({id: filmDetail[i].id})\n          .exec()\n\n        if (film) {\n          film.releaseDate = filmDetail[i].releaseDate // 更新上时间\n          film.runtime = filmDetail[i].runtime  // 更新电影时长\n          film.postPic = filmDetail[i].movieName+'封面图'  // 更新电影poster\n          if (!film.like) film.like = filmDetail[i].like\n          // 更新导演、主演照片\n\n          for(let j= 0 ; j < filmDetail[i].actorAddMsg.length ; j++) {\n            for(let k= 0 ; k < film.directors.length ; k++) {\n              if (film.directors[k].id === filmDetail[i].actorAddMsg[j].id) {\n                let item = film.directors[k]\n                item.avatars = filmDetail[i].actorAddMsg[j].id+'castImg.jpg'\n                film.directors.splice(k, 1, item)\n              }\n            }\n            for(let l= 0 ; l < film.casts.length ; l++) {\n              if (film.casts[l].id === filmDetail[i].actorAddMsg[j].id) {\n                let item = film.casts[l]\n                item.avatars = filmDetail[i].actorAddMsg[j].id+'castImg.jpg'\n                film.casts.splice(l, 1, item)\n              }\n            }\n          }\n\n          await film.save()\n        }\n      }\n    } catch (e) {\n      console.log(e)\n    }\n    console.log(`电影缺失上映日期、播放时长、电影封面信息补充完毕`)\n    return resolve()\n  })\n  // 添加爬取的电影剧照\n  await new Promise(async (resolve, reject) => {\n    for(let i = 0 ; i < filmStagePhotos.length ; i++) {\n      const film = await Film\n        .findOne({id: filmStagePhotos[i].id})\n        .exec()\n\n      if (film) {\n        for( let j = 0 ; j < filmStagePhotos[i].stagePhotos.length ; j++) {\n          film.filmStagePhotos.push(`${filmStagePhotos[i].id}${j}stagePhotoImg.jpg`)\n        }\n        await film.save()\n      }\n    }\n\n    console.log(`电影剧照补充完毕`)\n    return resolve()\n  })\n\n  // 预告片详情\n  await new Promise(async (resolve, reject) => {\n\n    for(let i = 0 ; i < filmTrailerDetail.length ; i++) {\n      const film = await Film\n        .findOne({id: filmTrailerDetail[i].id})\n        .exec()\n\n      if (film) {\n        try {\n          for (let j = 0; j < filmTrailerDetail[i].trailerArray.length; j++) {\n            film.trailerArray.push({\n              trailerMP4: `${filmTrailerDetail[i].trailerArray[j].trailerId}视频`,\n              trailerTitle: `${filmTrailerDetail[i].trailerArray[j].trailerTitle}`,\n              trailerDate: `${filmTrailerDetail[i].trailerArray[j].trailerDate}`,\n              trailerPoster: `${filmTrailerDetail[i].trailerArray[j].trailerId}封面图`,\n              trailerId: filmTrailerDetail[i].trailerArray[j].trailerId\n            })\n          }\n        } catch (e) {\n          console.log(e)\n        }\n        await film.save()\n      }\n    }\n\n    console.log(`电影预告片详情补充完毕`)\n    return resolve()\n  })\n}\n\nconst uploadQiniuFile = async () => {\n  const filmDetail = require('../../comingMovie.json')  // 电影封面、演职人员照片\n  const filmStagePhotos = require('../../comingMovieStagePhotos.json') // 剧照\n  const filmTrailerDetail = require('../../comingMovieTrailerDetail.json') // 预告片\n\n  for(let i = 0 ; i < filmDetail.length ; i++) {\n    // 上传电影封面照\n    qiniuFn.uploadQiniuFile(filmDetail[i].postPic, `${filmDetail[i].movieName}封面图`)\n    for (let j = 0; j < filmDetail[i].actorAddMsg.length; j++) {\n      // 上传电影主演照片\n      qiniuFn.uploadQiniuFile(filmDetail[i].actorAddMsg[j].actorImg, `${filmDetail[i].actorAddMsg[j].id}castImg.jpg`)\n    }\n  }\n\n  for(let i = 0 ; i < filmStagePhotos.length ; i++) {\n    // 剧照\n    try {\n      for (let j = 0; j < filmStagePhotos[i].stagePhotos.length; j++) {\n        await qiniuFn.uploadQiniuFile(filmStagePhotos[i].stagePhotos[j], `${filmStagePhotos[i].id}${j}stagePhotoImg.jpg`) // 缩略图\n        await qiniuFn.uploadQiniuFile(filmStagePhotos[i].stagePhotos[j].replace(/sqxs/, 'l'), `${filmStagePhotos[i].id}${j}stagePhotoImgBig.jpg`) // 大图\n      }\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n\n  for(let i = 0 ; i < filmTrailerDetail.length ; i++) {\n    try {\n      for (let j = 0; j < filmTrailerDetail[i].trailerArray.length; j++) {\n        await qiniuFn.uploadQiniuFile(filmTrailerDetail[i].trailerArray[j].trailerPoster, `${filmTrailerDetail[i].trailerArray[j].trailerId}封面图`)\n        await qiniuFn.uploadQiniuFile(filmTrailerDetail[i].trailerArray[j].trailerMP4, `${filmTrailerDetail[i].trailerArray[j].trailerId}视频`)\n      }\n    } catch (e) {\n      console.log(e)\n    }\n  }\n}\n/* 定时更新内容 */\nconst updateMovie = async () => {\n  console.time(\"sort\");\n  await movieFile.runMovieDetail()\n  await movieFile.runMovieTrailer()\n  await movieFile.runMovieTrailerDetail()\n  await movieFile.runMoviePhotos()\n  await fetchFilms()\n  await crawlerDetail()\n  await uploadQiniuFile()\n  console.timeEnd(\"sort\");\n}\nmodule.exports = updateMovie\n\n\n\n// WEBPACK FOOTER //\n// ./server/crawler/index.js","var fs = require('fs')\nvar resolve = require('path').resolve\nvar mongoose = require('mongoose')\nvar config = require('../config')\n\n/*const models = resolve(__dirname, './schema')\nfs.readdirSync(models)\n  .filter(file => ~file.search(/^[^\\.].*js$/))\n  .forEach(file => require(resolve(models, file)))*/\nconst models = resolve(__dirname, '../database/schema')\nfs.readdirSync(models)\n  .filter(file => ~file.search(/^[^\\.].*js$/))\n  .forEach(file => {\n    require(`../database/schema/${file}`)\n    // require(resolve(models,file))\n  })\n\nconst database = () => {\n\n    mongoose.set('debug', true)\n\n    mongoose.Promise = global.Promise\n\n    mongoose.connect(config.db)\n\n    mongoose.connection.on('disconnected', () => {\n        mongoose.connect(config.db)\n    })\n    mongoose.connection.on('error', err => {\n        console.error(err)\n    })\n\n    mongoose.connection.on('open', async () => {\n\n      console.log('Connected to MongoDB ', config.db)\n\n      const Admin = mongoose.model('Admin')\n      let user = await Admin.findOne({\n        user: 'admin'\n      })\n\n      if (!user) {\n        console.log('写入管理员数据')\n\n        user = new Admin({\n          user: 'admin',\n          password: '123456',\n          role: 'superAdmin',\n          nickname: 'Aditya Sui'\n        })\n\n        await user.save()\n      }\n\n    })\n\n}\n\nmodule.exports = database\n\n\n\n// WEBPACK FOOTER //\n// ./server/database/database.js","'use strict'\n\nconst nodemailer = require('nodemailer')\nconst fs = require('fs')\nconst path = require('path')\nconst ejs = require('ejs')\n\nlet transporter = nodemailer.createTransport({\n  // host: 'smtp.ethereal.email',\n  service: 'qq', // 使用了内置传输发送邮件 查看支持列表：https://nodemailer.com/smtp/well-known/\n  port: 465, // SMTP 端口\n  secureConnection: true, // 使用了 SSL\n  auth: {\n    user: '171426589@qq.com',\n    // 这里密码不是qq密码，是你设置的smtp授权码\n    pass: 'xmzrcehbkyvbcabi'\n  }\n})\n\nconst sendMailFn = (sendMsg) => {\n  const template = ejs.compile(fs.readFileSync(path.resolve(__dirname, 'email.ejs'), 'utf8'))\n\n\n  let mailOptions = {\n    from: '\"FilmGo 定时爬虫启动\" <171426589@qq.com>', // sender address\n    to: 'suiyang_sun@163.com', // list of receivers\n    subject: 'FilmGo 定时爬虫启动了, 预计5min更新完毕，请实时观察' // Subject line\n  }\n  // send mail with defined transport object\n  transporter.sendMail(mailOptions, (error, info) => {\n    if (error) {\n      return console.log(error)\n    }\n    console.log('Message sent: %s', info.messageId)\n    // Message sent: <04ec7731-cc68-1ef6-303c-61b0f796b78f@qq.com>\n  })\n}\n\nmodule.exports = sendMailFn\n\n\n\n// WEBPACK FOOTER //\n// ./server/middleware/nodemail.js","const router = require('koa-router')()\n\nconst Film = require('../database/schema/flim')\nconst Genre = require('../database/schema/genre')\n\nrouter.get('/api/film/comingsoon', async (ctx, next) => {\n  try {\n    let films = await Film\n      .find()\n      .exec()\n    ctx.body = {\n      success: true,\n      data: films\n    }\n  } catch (e) {\n    let errMsg = {\n      localhost: ctx.url,\n      errorMsg: e\n    }\n\n    ctx.error(10001, errMsg)\n  }\n})\nrouter.get('/api/film/id', async (ctx, next) => {\n  const id = ctx.query.id\n  if (!id) {\n    let errMsg = {\n      localhost: ctx.url,\n      errorMsg: `id为空`\n    }\n    ctx.error(10000, errMsg)\n  }\n  const film = await Film\n    .findOne({id: id})\n    .exec()\n  ctx.body = {\n    success: true,\n    data: film\n  }\n})\nrouter.get('/api/film/poster/id', async (ctx, next) => {\n  const { filmId } = ctx.query\n  if (!filmId) {\n    let errMsg = {\n      localhost: ctx.url,\n      errorMsg: `filmId 为空`\n    }\n    ctx.error(10000, errMsg)\n  }\n  const film = await Film\n    .findOne({id: filmId}, 'title releaseDate trailerArray like id')\n    .exec()\n\n  ctx.body = {\n    success: true,\n    data: film\n  }\n})\n\nmodule.exports = router\n\n\n\n// WEBPACK FOOTER //\n// ./server/router/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"koa-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"koa2-cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa2-cors\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"node-schedule\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-schedule\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 25\n// module chunks = 0","const config = {\n  db:'mongodb://127.0.0.1/filmgo'\n}\n\nmodule.exports = config\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","const rp =  require('request-promise')\nconst cheerio =  require('cheerio') // Node.js版本的jquery\nconst fs = require('fs')\n// const iconv = require('iconv-lite') // 文件编码转换\nconst request = require(\"request\")\n// const proxyIP = require('../middleware/request')\nconst uuid = require('node-uuid');\n\nconst sleep = async time => await new Promise( resolve => {\n    setTimeout( () => {\n        return resolve(console.log(`等待${time}s`))\n    }, time*1000)\n} )\n\nconst proxy = ['180.76.188.115','180.76.138.181','180.76.239.106','180.76.166.103','180.76.181.205','180.76.234.215','180.76.106.163','180.76.184.179','180.76.244.38','180.76.113.79','180.76.169.176','180.76.169.122','180.76.106.208','180.76.178.83','180.76.147.196','180.76.112.206',\n  '180.76.233.125','180.76.186.99','180.76.51.74','180.76.234.146','180.76.153.183','180.76.155.233','180.76.57.252','180.76.120.42','180.76.103.107','180.76.58.216','180.76.112.24','180.76.108.218','180.76.98.218','180.76.168.148','180.76.109.38','180.76.249.53',\n  '180.76.59.173','180.76.145.181','180.76.99.7','180.76.59.64','180.76.51.56','180.76.57.82','180.76.233.53','180.76.156.144']\nconst proxyConfig = {\n  port: \"443\",\n  user: \"martindu\",\n  password: \"fy1812!!\"\n}\n\n/*\n* 1. 即将上映电影 url 爬取 runMovieDetail\n* 2. 即将上映电影缺失信息爬取 getComingMovie\n* 根据 url 爬取电影的 poster、上映日期、片长、制作国家等信息\n* */\nconst getComingMovie = async ({movieUrl, restartCount = 0} = {}) => {\n  const options = {\n    method: 'GET',\n    uri: movieUrl.url,\n    encoding: \"utf-8\"\n  }\n  // 代理地址\n  const random = Math.floor(Math.random() * proxy.length)\n  // console.log(`随机数为${random}`)\n  options.proxy = `http://${proxyConfig.user}:${proxyConfig.password}@${proxy[random]}:${proxyConfig.port}`;\n\n  // request 请求\n  const movieMsg =  await new Promise( resolve => {\n    request(options, async function (error, response, body) {\n      let $\n      try {\n        if (error) throw error;\n         $ = cheerio.load(body,{decodeEntities: false})\n      } catch (e) {\n        console.log(`爬取《${movieUrl.title}》失败，准备重新开始爬取\\n错误日志${e}\\n重启次数为${restartCount}`)\n        // console.error(e);\n      }\n      if ($) {\n        let releaseDate = []\n        $('#info span[property=\"v:initialReleaseDate\"]').each(function () {\n          releaseDate.push($(this).html())\n        })\n        let runtime = []\n        $('#info span[property=\"v:runtime\"]').each(function () {\n          runtime.push($(this).html())\n        })\n        let casts = []\n        $('.celebrities-list .celebrity').each(function () {\n          const actor = $(this).find('.avatar').attr('style')\n          const id = $(this).find('a').attr('href')\n          if (actor) {\n            casts.push({\n              actorImg: actor.match(/background-image: url\\((\\S*)\\)/)[1],\n              id: id.match(/\\/celebrity\\/(\\S*)\\//)[1]\n            })\n          }\n        })\n\n        const movie = {\n          movieName: $('span[property=\"v:itemreviewed\"]').text(),\n          releaseDate: releaseDate,\n          runtime: runtime,\n          postPic: $('#mainpic img').attr('src'),\n          id: movieUrl.url.match(/\\/subject\\/(\\S*)\\//)[1],\n          actorAddMsg: casts,\n          like: movieUrl.like\n        }\n\n        resolve(movie)\n      } else {\n        /*\n        *  需要限制重启次数，目前只能重启 4 次\n        *  超过 4 次将发送邮件通知\n        * */\n        restartCount++\n        if (restartCount < 5) {\n          await sleep(2) // 重新请求间歇 2s\n          const movie = await getComingMovie({movieUrl: movieUrl, restartCount: restartCount})\n          resolve(movie)\n        } else {\n          console.log(`目前重启次数为${restartCount}, 重复次数过多，不可抗拒因素，将发起邮件通知`)\n          resolve(`爬取失败，重启次数为${restartCount}`)\n        }\n      }\n    })\n  })\n  if (typeof movieMsg === \"object\") console.log(`电影 《${movieMsg.movieName}》 爬取成功`)\n  return movieMsg\n}\nconst runMovieDetail = async ({restartCount = 0} = {}) => {\n  let $\n  let comingMoviesLink = []\n  let comingMovies = []\n\n  const options = {\n      uri: 'https://movie.douban.com/coming',\n      transform: body => cheerio.load(body, {decodeEntities: false})\n  }\n\n  $ = await rp(options)\n  try {\n  } catch (e) {\n    console.log(`爬取 https://movie.douban.com/coming 网站失败，准备重新开始爬取 = 。=\\\\n具体错误信息${e}`)\n    /*\n    *  需要限制重启次数，目前只能重启 4 次\n    *  超过 4 次将发送邮件通知\n    * */\n    restartCount++\n    if (restartCount <5) {\n      console.log(`目前重启次数为${restartCount}`)\n      runMovieDetail(restartCount)\n    } else {\n      console.log(`目前重启次数为${restartCount}, 重复次数过多，不可抗拒因素，将发起邮件通知`)\n    }\n    return\n  }\n\n  $('.article tbody tr').each(function (index) {\n    if (index < 5) {\n      comingMoviesLink.push({\n        url: $(this).find(\"a\").attr('href'),\n        title: $(this).find(\"a\").html().trim(),\n        like: $(this).find(\"td\").eq(4).html().trim().match(/^[0-9]*/)[0]\n      })\n    }\n  })\n\n  console.log(`总共爬取了 ${comingMoviesLink.length} 个电影 url`)\n  // 更新当前新电影列表 url 到本地\n  fs.writeFileSync('./comingMovieUri.json', JSON.stringify(comingMoviesLink, null, 2), 'utf8')\n\n  // 爬取豆瓣即将上映电影的poster、上映日期、片长\n  // for(let i = 0; i < comingMoviesLink.length; i++) {\n  for(let i = 0; i < 5; i++) {\n  // for(let i = 0; i < 10; i++) {\n    const movie = await getComingMovie({movieUrl: comingMoviesLink[i]})\n    comingMovies.push(movie)\n    console.log(`这是第${i+1}个电影，《${movie.movieName}》`)\n\n    // 更新即将上映电影的 poster、上映日期、片长 到本地\n    fs.writeFileSync('./comingMovie.json', JSON.stringify(comingMovies, null, 2), 'utf8')\n\n    await sleep(2) // 间歇 2s\n  }\n\n  console.log(`电影基本信息全部爬取成功, 共计${comingMoviesLink.length}`)\n}\n\n/*\n* 1.电影预告片列表 runMovieTrailer()\n* 2.预告片的详细uil、封面 getMovieTrailer()\n* */\nconst getMovieTrailer = async ({movieUrl, restartCount = 0} = {}) => {\n  const options = {\n    method: 'GET',\n    uri: `${movieUrl.url}trailer`,\n    encoding: \"utf-8\"\n  }\n\n  // 代理地址\n  const random = Math.floor(Math.random() * proxy.length)\n  // console.log(`随机数为${random}`)\n  options.proxy = `http://${proxyConfig.user}:${proxyConfig.password}@${proxy[random]}:${proxyConfig.port}`\n\n  // request 请求\n  const movieMsg = await new Promise( resolve => {\n    request(options, async function (error, response, body) {\n      let $\n      try {\n        if (error) throw error;\n        $ = cheerio.load(body, {decodeEntities: false})\n\n      } catch (e) {\n        console.log(`爬取《${movieUrl.title}》失败，准备重新开始爬取\\n错误日志${e}\\n重启次数为${restartCount}`)\n        console.error(e);\n      }\n\n      if ($) {\n        let trailerUri = []\n        let trailerPoster = []\n        $('.article a.pr-video').each(function () {\n          trailerUri.push($(this).attr('href'))\n          trailerPoster.push($(this).find('img').attr('src'))\n        })\n        const trailer = {\n          movieName: $(\"#content>h1\").text(),\n          trailerUri: trailerUri,\n          trailerPoster: trailerPoster,\n          id: movieUrl.url.match(/\\/subject\\/(\\S*)\\//)[1]\n        }\n        resolve(trailer)\n      } else {\n        /*\n        *  需要限制重启次数，目前只能重启 4 次\n        *  超过 4 次将发送邮件通知\n        * */\n        restartCount++\n        if (restartCount < 5) {\n          await sleep(2) // 重新请求间歇 2s\n          const trailer = await getMovieTrailer({movieUrl: movieUrl, restartCount: restartCount})\n          resolve(trailer)\n        } else {\n          console.log(`目前重启次数为${restartCount}, 重复次数过多，不可抗拒因素，将发起邮件通知`)\n          resolve(`爬取失败，重启次数为${restartCount}`)\n        }\n      }\n    })\n  })\n  if (typeof movieMsg === \"object\") console.log(`电影 《${movieMsg.movieName}》 爬取成功`)\n  return movieMsg\n}\nconst runMovieTrailer = async () => {\n  let comingMoviesLink = require('../../comingMovieUri') // 全部电影的 url\n  let Trailer = []\n\n  for(let i = 0; i < comingMoviesLink.length ; i++) {\n  // for(let i = 0; i < 10 ; i++) {\n    const trailer = await getMovieTrailer({movieUrl: comingMoviesLink[i]})\n    Trailer.push(trailer)\n    console.log(`这是第${i+1}个电影的预告片列表, ${trailer.movieName}`)\n\n    await sleep(2) // 间歇 2s\n    fs.writeFileSync('./comingMovieTrailer.json', JSON.stringify(Trailer, null, 2), 'utf8')\n  }\n  console.log(`电影预告片列表全部爬取成功, 共计${comingMoviesLink.length}`)\n}\n\n/*\n* 1.电影预告详细信息获取 runMovieTrailerDetail\n* 2.videolink、title、发布日期 getMovieTrailerDetail\n* 3.请求失败重新请求 toRequest\n* */\nconst toRequest = async ({trailerUrl, trailerPoster, restartCount = 1} = {}) => {\n  const options = {\n    method: 'GET',\n    uri: `${trailerUrl}`,\n    encoding: \"utf-8\"\n  }\n  // 代理地址\n  const random = Math.floor(Math.random() * proxy.length)\n  // console.log(`随机数为${random}`)\n  options.proxy = `http://${proxyConfig.user}:${proxyConfig.password}@${proxy[random]}:${proxyConfig.port}`;\n\n  // request 请求\n  const movieMsg =  await new Promise( resolve => {\n    request(options, async function (error, response, body) {\n      let $\n      try {\n        $ = cheerio.load(body,{decodeEntities: false})\n\n      } catch (e) {\n        console.log(`爬取《${trailerUrl}》失败，准备重新开始爬取\\n错误日志${e}\\n重启次数为${restartCount}`)\n        // console.error(e);\n      }\n\n      if ($) {\n        console.log(`电影 《${trailerUrl}》 重新爬取成功,重启次数为${restartCount}`)\n\n        resolve({\n          trailerMP4: $('#movie_player source').attr('src'),\n          trailerTitle: $('h1').text(),\n          trailerDate: $('.trailer-info>span').html(),\n          trailerPoster: trailerPoster,\n          trailerId: uuid.v1().replace(/-/g, \"\")\n        })\n      } else {\n        /*\n        *  需要限制重启次数，目前只能重启 4 次\n        *  超过 4 次将发送邮件通知\n        * */\n        restartCount++\n        if (restartCount < 5) {\n          await sleep(2) // 重新请求间歇 2s\n          const trailer = await toRequest({trailerUrl: trailerUrl, restartCount: restartCount})\n          resolve(trailer)\n        } else {\n          console.log(`目前重启次数为${restartCount-1}, 重复次数过多，不可抗拒因素，将发起邮件通知`)\n          resolve(`爬取失败，重启次数为${restartCount}`)\n        }\n      }\n    })\n  })\n  if (typeof movieMsg === \"object\") console.log(`电影 《${trailerUrl}》 重新爬取成功,重启次数为${restartCount}。`)\n  return movieMsg\n}\n\nconst getMovieTrailerDetail = async (trailer) => {\n  // 判断有无预告片\n  let trailerArray = []\n  if(trailer.length !== 0) {\n    trailerArray = await Promise.all(trailer.trailerUri.map(async (item, index) => {\n      const options = {\n        method: 'GET',\n        uri: `${item}`,\n        encoding: \"utf-8\"\n      }\n      // 代理地址\n      const random = Math.floor(Math.random() * proxy.length)\n      // console.log(`随机数为${random}`)\n      options.proxy = `http://${proxyConfig.user}:${proxyConfig.password}@${proxy[random]}:${proxyConfig.port}`;\n\n      // request 请求\n      const movieMsg =  await new Promise( resolve => {\n        request(options, async function (error, response, body) {\n          let $\n          try {\n            $ = cheerio.load(body,{decodeEntities: false})\n\n          } catch (e) {\n            console.log(`爬取《${trailer.movieName}》失败，准备重新开始爬取\\n错误日志${e}`)\n            // console.error(e);\n          }\n\n          if ($) {\n            resolve({\n              trailerMP4: $('#movie_player source').attr('src'),\n              trailerTitle: $('h1').text(),\n              trailerDate: $('.trailer-info>span').html(),\n              trailerPoster: trailer.trailerPoster[index],\n              trailerId: uuid.v1().replace(/-/g, \"\")\n            })\n          } else {\n            /*\n            *  需要限制重启次数，目前只能重启 4 次\n            *  超过 4 次将发送邮件通知\n            * */\n            await sleep(2) // 重新请求间歇 2s\n            const trailer = await toRequest({trailerUrl: item, trailerPoster: trailer.trailerPoster[index]})\n            resolve(trailer)\n          }\n        })\n      })\n      return movieMsg\n    }))\n  }\n  return {\n    trailerArray,\n    id: trailer.id,\n    trailerTitle: trailer.movieName\n  }\n}\nconst runMovieTrailerDetail = async () => {\n  let comingTrailerLink = require('../../comingMovieTrailer')\n  let Trailer = []\n\n  try {\n    for(let i = 0; i < comingTrailerLink.length ; i++) {\n      const trailer = await getMovieTrailerDetail(comingTrailerLink[i])\n      Trailer.push(trailer)\n\n      console.log(`这是第${i+1}个电影的预告详细信息, 《${trailer.trailerTitle}》`)\n\n      fs.writeFileSync('./comingMovieTrailerDetail.json', JSON.stringify(Trailer, null, 2), 'utf8')\n      await sleep(2) // 间歇 2s\n    }\n  } catch (e) {\n    console.log(e)\n  }\n  console.log(`电影预告详细全部爬取成功, 共计${comingTrailerLink.length}`)\n}\n\n/*\n* 获取电影的剧照、海报\n* runMoviePhotos\n* getMoviePhotos\n* */\nconst getMoviePhotos = async ({ movieUrl, restartCount = 0} = {}) => {\n  const options = {\n    method: 'GET',\n    uri: `${movieUrl.url}/all_photos`,\n    encoding: \"utf-8\"\n  }\n  // 代理地址\n  const random = Math.floor(Math.random() * proxy.length)\n  // console.log(`随机数为${random}`)\n  options.proxy = `http://${proxyConfig.user}:${proxyConfig.password}@${proxy[random]}:${proxyConfig.port}`;\n\n  // request 请求\n  const movieMsg =  await new Promise( resolve => {\n    request(options, async function (error, response, body) {\n      let $\n      try {\n        if (error) throw error;\n        $ = cheerio.load(body,{decodeEntities: false})\n\n      } catch (e) {\n        console.log(`爬取《${movieUrl.title}》失败，准备重新开始爬取\\n错误日志${e}`)\n        // console.error(e);\n      }\n      if ($) {\n        let stagePhotos = []\n        $('.article .pic-col5 li a').each(function () {\n          stagePhotos.push($(this).find('img').attr('src'))\n        })\n\n        resolve({\n          movieName: $(\"#content>h1\").text(),\n          stagePhotos: stagePhotos,\n          id: movieUrl.url.match(/\\/subject\\/(\\S*)\\//)[1]\n        })\n      } else {\n        /*\n        *  需要限制重启次数，目前只能重启 4 次\n        *  超过 4 次将发送邮件通知\n        * */\n        restartCount++\n        if (restartCount < 5) {\n          await sleep(2) // 间歇 2s\n          const photo = await getMoviePhotos({movieUrl: movieUrl, restartCount: restartCount})\n          resolve(photo)\n        } else {\n          console.log(`目前重启次数为${restartCount-1}, 重复次数过多，不可抗拒因素，将发起邮件通知`)\n          resolve(`爬取失败，重启次数为${restartCount-1}`)\n        }\n      }\n    })\n  })\n  if (typeof movieMsg === \"object\") console.log(`电影 《${movieUrl.title}》 重新爬取成功,重启次数为${restartCount}。`)\n  return movieMsg\n}\nconst runMoviePhotos = async () => {\n  let comingMoviesLink = require('../../comingMovieUri')\n  let stagePhotos = []\n\n  for(let i = 0; i < comingMoviesLink.length ; i++) {\n  // for(let i = 0; i < 10 ; i++) {\n    const photo = await getMoviePhotos({movieUrl: comingMoviesLink[i]})\n    stagePhotos.push(photo)\n\n    console.log(`这是第${i+1}个电影的剧照, ${photo.movieName}`)\n    fs.writeFileSync('./comingMovieStagePhotos.json', JSON.stringify(stagePhotos, null, 2), 'utf8')\n    // await sleep(2) // 间歇 2s\n  }\n  console.log(`电影剧照全部爬取完成, 共计${comingMoviesLink.length}`)\n}\nmodule.exports = { runMovieDetail, runMovieTrailer, runMovieTrailerDetail, runMoviePhotos }\n\n\n\n// WEBPACK FOOTER //\n// ./server/crawler/crawlerAPI.js","const qiniu = require('qiniu')\nconst request = require('request')\nconst crypto = require('crypto')\n\nconst accessKey = 'LIWJTwQKsmsTvBrNLD0k-nu62diiEFKw34NfWj9P';\nconst secretKey = 'R88bNThcj1GjiIY7D8BOANGUzCRJ6bTaC6DVE2t1';\n/*const mac = new qiniu.auth.digest.Mac(accessKey, secretKey);\n\nconst spaceName = 'filmgo'\n\nconst options = {\n  scope: spaceName,\n  expires: 7200\n};\nconst putPolicy = new qiniu.rs.PutPolicy(options);\nconst uploadToken = putPolicy.uploadToken(mac);\n\n\nconst config = new qiniu.conf.Config();\nconfig.zone = qiniu.zone.Zone_z0 // 华东\n\n\n\nconst localFile = \"./user.jpg\";\nconst formUploader = new qiniu.form_up.FormUploader(config);\nconst putExtra = new qiniu.form_up.PutExtra();\nconst key='test.png';\n// 文件上传\nformUploader.putFile(uploadToken, key, localFile, putExtra, function(respErr,respBody, respInfo) {\n  if (respErr) {\n    throw respErr;\n  }\n  if (respInfo.statusCode == 200) {\n    console.log(respBody);\n  } else {\n    console.log(respInfo.statusCode);\n    console.log(respBody);\n  }\n\n})*/\n\n\n//需要填写你的 Access Key 和 Secret Key\n/*qiniu.conf.ACCESS_KEY = accessKey\nqiniu.conf.SECRET_KEY = secretKey*/\n\n/*\n* URL安全的Base64编码\n*\n* URL安全的Base64编码适用于以URL方式传递Base64编码结果的场景。\n* 该编码方式的基本过程是先将内容以Base64格式编码为字符串，然后检查该结果字符串，将字符串中的加号+换成中划线-，并且将斜杠/换成下划线_。\n*\n* */\nfunction safe64(base64) {\n\n  base64 = base64.replace(/\\+/g, \"-\");\n  base64 = base64.replace(/\\//g, \"_\");\n  return base64;\n}\n\n/*\n* base64ToUrlSafe\n* urlSafeToBase64\n* urlsafeBase64Encode\n* urlSafeBase64Decode\n* hmacSha1\n* */\n\n\nconst uploadQiniuFile = (fileUrl, fileName) => {\n  // 管理凭证\n  function genManageToken(accessKey, secretKey, pathAndQuery, body) {\n    const data = `${pathAndQuery}\\n${body}`\n    let hash = qiniu.util.hmacSha1(data, secretKey);\n    hash = qiniu.util.base64ToUrlSafe(hash);\n    return accessKey+ \":\" +hash\n  }\n\n  // let picUrl = 'https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2517591798.jpg'\n  fileUrl = qiniu.util.urlsafeBase64Encode(fileUrl)\n  let bucket = 'filmgo'\n  // let key = 'p2517591798.png'\n  let key = fileName\n  bucket = qiniu.util.encodedEntry(bucket, key)\n\n  const path = \"/fetch/\" + fileUrl + \"/to/\" + bucket;\n  const fetchUrl = \"http://iovip.qbox.me\" + path;\n\n  const targetOptions = {\n    method: 'POST',\n    url: fetchUrl,\n    headers: {\n      'Authorization': \"QBox \" + genManageToken(accessKey, secretKey, path, \"\"),\n      'Content-Type': 'application/json',\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    request(targetOptions, function (error, response, body) {\n      try {\n\n        if (error) throw error;\n        console.log(body)\n        resolve(body)\n\n      } catch (e) {\n        reject(e)\n      }\n    })\n  })\n}\n\nmodule.exports = { uploadQiniuFile }\n\n\n\n// WEBPACK FOOTER //\n// ./server/middleware/qiniu.js","module.exports = [{\"movieName\":\"女校怪谈 视频\",\"trailerUri\":[],\"trailerPoster\":[],\"id\":\"30210203\"},{\"movieName\":\"狄仁杰之四大天王 视频\",\"trailerUri\":[\"https://movie.douban.com/trailer/233791/#content\",\"https://movie.douban.com/trailer/233325/#content\",\"https://movie.douban.com/trailer/232838/#content\",\"https://movie.douban.com/trailer/221792/#content\",\"https://movie.douban.com/trailer/230245/#content\",\"https://movie.douban.com/trailer/233976/#content\",\"https://movie.douban.com/trailer/233737/#content\",\"https://movie.douban.com/trailer/232616/#content\",\"https://movie.douban.com/trailer/233781/#content\",\"https://movie.douban.com/trailer/233597/#content\",\"https://movie.douban.com/trailer/233527/#content\",\"https://movie.douban.com/trailer/233362/#content\",\"https://movie.douban.com/trailer/233067/#content\",\"https://movie.douban.com/trailer/232984/#content\",\"https://movie.douban.com/trailer/231450/#content\",\"https://movie.douban.com/trailer/232624/#content\"],\"trailerPoster\":[\"https://img3.doubanio.com/img/trailer/medium/2528211904.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2527054753.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2526137676.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2499767152.jpg?\",\"https://img1.doubanio.com/img/trailer/medium/2520334127.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2528487325.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2528093112.jpg?\",\"https://img1.doubanio.com/img/trailer/medium/2525590378.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2528185600.jpg?\",\"https://img1.doubanio.com/img/trailer/medium/2527752127.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2527641751.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2527141912.jpg?\",\"https://img1.doubanio.com/img/trailer/medium/2526441668.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2526314013.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2522954430.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2525591834.jpg?\"],\"id\":\"25882296\"},{\"movieName\":\"西虹市首富 视频\",\"trailerUri\":[\"https://movie.douban.com/trailer/233361/#content\",\"https://movie.douban.com/trailer/232859/#content\",\"https://movie.douban.com/trailer/232030/#content\",\"https://movie.douban.com/trailer/231173/#content\",\"https://movie.douban.com/trailer/233327/#content\",\"https://movie.douban.com/trailer/232506/#content\",\"https://movie.douban.com/trailer/234143/#content\"],\"trailerPoster\":[\"https://img1.doubanio.com/img/trailer/medium/2527141847.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2526149462.jpg?\",\"https://img1.doubanio.com/img/trailer/medium/2524221309.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2522456574.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2527062942.jpg?\",\"https://img1.doubanio.com/img/trailer/medium/2525046609.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2528850093.jpg?\"],\"id\":\"27605698\"},{\"movieName\":\"萌学园：寻找盘古 视频\",\"trailerUri\":[\"https://movie.douban.com/trailer/234138/#content\",\"https://movie.douban.com/trailer/233739/#content\",\"https://movie.douban.com/trailer/233974/#content\"],\"trailerPoster\":[\"https://img3.doubanio.com/img/trailer/medium/2528849466.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2528093465.jpg?\",\"https://img3.doubanio.com/img/trailer/medium/2528486736.jpg?\"],\"id\":\"26754880\"},{\"movieName\":\"文朝荣 视频\",\"trailerUri\":[],\"trailerPoster\":[],\"id\":\"30252429\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./comingMovieTrailer.json\n// module id = 29\n// module chunks = 0","var map = {\n\t\"./admin\": 6,\n\t\"./admin.js\": 6,\n\t\"./category\": 7,\n\t\"./category.js\": 7,\n\t\"./comment\": 8,\n\t\"./comment.js\": 8,\n\t\"./flim\": 2,\n\t\"./flim.js\": 2,\n\t\"./genre\": 3,\n\t\"./genre.js\": 3,\n\t\"./user\": 9,\n\t\"./user.js\": 9\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 30;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/database/schema ^\\.\\/.*$\n// module id = 30\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"nodemailer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nodemailer\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"qiniu\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"qiniu\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"request-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request-promise\"\n// module id = 41\n// module chunks = 0","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport schedule from 'node-schedule'\n// after end\n\nimport session from 'koa-session'\n\nimport cors from 'koa2-cors'\n\nconst filmApi = require('./router')\nconst mongodb = require('./database/database')\nconst bodyParser = require('koa-bodyparser')\n\nconst crawler = require('./crawler/index')\nconst nodemailer = require('./middleware/nodemail')\n\nasync function start () {\n  const app = new Koa()\n  const host = process.env.HOST || '127.0.0.1'\n  const port = process.env.PORT || 5000\n\n  // Import and Set Nuxt.js options\n  let config = require('../nuxt.config.js')\n  config.dev = !(app.env === 'production')\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n  app.use(cors({\n    origin: function (ctx) {\n      return 'http://localhost:7998'\n    },\n    exposeHeaders: ['WWW-Authenticate', 'Server-Authorization'],\n    maxAge: 5,\n    credentials: true,\n    allowMethods: ['GET', 'POST', 'DELETE'],\n    allowHeaders: ['Content-Type', 'Authorization', 'Accept']\n  }))\n  // body-parser\n  app.use(bodyParser())\n\n  // mongodb\n  mongodb()\n\n  // session\n  app.keys = ['some session']\n\n  const CONFIG = {\n    key: 'SESSION', /** (string) cookie key (default is koa:sess) */\n    /** (number || 'session') maxAge in ms (default is 1 days) */\n    /** 'session' will result in a cookie that expires when session/browser is closed */\n    /** Warning: If a session cookie is stolen, this cookie will never expire */\n    maxAge: 86400000,\n    overwrite: true, /** (boolean) can overwrite or not (default true) */\n    httpOnly: true, /** (boolean) httpOnly or not (default true) */\n    signed: true, /** (boolean) signed or not (default true) */\n    rolling: false /** (boolean) Force a session identifier cookie to be set on every response. The expiration is reset to the original maxAge, resetting the expiration countdown. default is false **/\n  }\n  app.use(session(CONFIG, app))\n\n  // 定时爬虫\n  const scheduleRecurrenceRule = () => {\n\n    let rule = new schedule.RecurrenceRule();\n    rule.hour = 16\n    rule.minute = 50\n    rule.second = 0\n\n    schedule.scheduleJob(rule, function(){\n      nodemailer()\n      console.log('scheduleRecurrenceRule:' + new Date());\n      crawler()\n    });\n\n  }\n  crawler()\n  scheduleRecurrenceRule()\n  // routes\n  app.use(filmApi.routes(), filmApi.allowedMethods())\n\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n    ctx.req.session = ctx.session\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n\n  app.listen(port, host)\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}